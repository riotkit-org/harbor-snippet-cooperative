version: "{{ COMPOSE_VERSION }}"

services:
    sslh:
        image: quay.io/riotkit/sslh:1.20-r3
        ports:
            - 443:443
        cap_add:
            - {% if COMPOSE_VERSON >= 3}cap_net_admin{% else %}NET_ADMIN{% endif %}
        network_mode: host
        environment:
            HTTP_TARGET: "127.0.0.1:80"
            SSL_TARGET: "127.0.0.1:443"
            SSH_TARGET: "127.0.0.1:{{ ssh_port }}"
